<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="~{fragments/head :: head}"></head>
<body>
<div class="container mt-4">
  <h2 th:text="${workout.workoutName}">Workout Name</h2>
  <table class="table table-bordered">
    <thead>
    <tr>
      <th>Упражнение</th>
      <th>Серия №</th>
      <th>Повторения</th>
      <th>Тежест (kg)</th>
      <th>Статус</th>
      <th>Действие</th>
    </tr>
    </thead>
    <tbody>
    <th:block th:each="we : ${workout.exercises}">
      <th:block th:each="set, setStat : ${we.sets}">
        <form th:action="@{/workouts/{workoutId}/exercise/{exerciseId}/recordSet(workoutId=${workout.id},exerciseId=${we.exerciseId})}" method="post">
          <tr>
            <td th:if="${setStat.index == 0}" th:rowspan="${#lists.size(we.sets)}" th:text="${we.exerciseName}"></td>
            <td th:text="${setStat.index + 1}"></td>
            <td>
              <input type="hidden" name="setId" th:value="${set.id}" />
              <input type="number" name="reps" th:value="${set.reps}" min="0" class="form-control form-control-sm" />
            </td>
            <td>
              <input type="number" name="weight" th:value="${set.weight}" min="0" class="form-control form-control-sm" />
            </td>
            <td>
              <span th:text="${set.completed} ? 'Готова' : 'Не е готова'"></span>
            </td>
            <td>
              <button type="submit" class="btn btn-success btn-sm" th:if="${!set.completed}">Запиши серия</button>
              <span th:if="${set.completed}" class="text-success">✔</span>
            </td>
          </tr>
        </form>
      </th:block>
    </th:block>
    </tbody>

  </table>
  <a th:href="@{/workouts}" class="btn btn-secondary">Обратно към списъка</a>
</div>
<div th:replace="~{fragments/bootstrap-js::bootstrap-js}"></div>
</body>
</html>
